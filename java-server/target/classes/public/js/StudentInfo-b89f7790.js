import{d as e,a1 as a,a2 as l,C as t,a3 as r,a4 as d,b as s,a5 as o,_ as m,c as i,f as u,e as n,w as p,a6 as h,x as c,o as f,H as g,I as b,N as V,k as y,X as _,a7 as v,n as j,p as k,a8 as I}from"./index-ed299ca2.js";/* empty css                  *//* empty css                    *//* empty css              *//* empty css            *//* empty css               */import{f as w}from"./systemServ-cbef2db6.js";import{b as x}from"./teachingServ-8a53b20e.js";import"./request-1673f500.js";const U=e({data:()=>({valid:!1,studentId:null,form:{},birthday:new Date,gender:{},genderList:[],nameRules:[],emailRules:[],imgStr:"",teacherList:[]}),async created(){const e=this.$route.query.studentId;if(null!=e&&(this.studentId=parseInt(e.toString())),this.genderList=await w("XBM"),null!=this.studentId){this.form=await a(this.studentId),this.birthday=new Date(this.form.birthday),this.gender=l(this.genderList,this.form.gender);let e=await t(this.form.personId+".jpg");this.imgStr=e.data,this.imgStr=this.imgStr.replace("data:image/png;base64","data:image/jpeg;base64")}},methods:{async submit(){this.$refs.form.validate((async e=>{if(e){this.form.birthday=r(this.birthday);const e=await d(this.studentId,this.form);0==e.code?s.push({path:"/student-panel"}):alert(e.msg)}else o.alert("请检查输入项")}))},getImage(){},backPage(){s.push({path:"/student-panel"})},getTeachers(){x().then((e=>{this.teacherList=e.data.data}))},checkIdNum(){const e=this.form.card,a=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;return a.test(e)?a.test(e):(o.alert("证件号格式不正确"),!1)},checkPhone(){const e=this.form.phone,a=/^1[34578]\d{9}$/;return a.test(e)?a.test(e):(o.alert("手机号码格式不正确"),!1)},checkEmail(){const e=this.form.email,a=/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;return a.test(e)?a.test(e):(o.alert("邮箱格式不正确"),!1)}}}),S={class:"base_form"},$={class:"form-div",style:{"margin-top":"5px"}},q={class:"form-body"},L={style:{"margin-left":"20px"}},N=["src"];const z=m(U,[["render",function(e,a,l,t,r,d){const s=_,o=v,m=j,w=k,x=I,U=h,z=c;return f(),i("div",S,[a[13]||(a[13]=u("div",{class:"base_header"},[u("div",{class:"blue_column"}),u("div",{class:"base_title"},"学生信息")],-1)),u("div",$,[u("div",q,[n(U,{model:e.form,"label-width":"auto",style:{"max-width":"400px"},ref:"form"},{default:p((()=>[n(o,{prop:"num",label:"学号"},{default:p((()=>[n(s,{modelValue:e.form.num,"onUpdate:modelValue":a[0]||(a[0]=a=>e.form.num=a),placeholder:"请输入学号"},null,8,["modelValue"])])),_:1}),n(o,{prop:"name",label:"姓名"},{default:p((()=>[n(s,{modelValue:e.form.name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.form.name=a),placeholder:"请输入姓名"},null,8,["modelValue"])])),_:1}),n(o,{prop:"dept",label:"学院"},{default:p((()=>[n(s,{modelValue:e.form.dept,"onUpdate:modelValue":a[2]||(a[2]=a=>e.form.dept=a),placeholder:"请输入学院"},null,8,["modelValue"])])),_:1}),n(o,{prop:"major",label:"专业"},{default:p((()=>[n(s,{modelValue:e.form.major,"onUpdate:modelValue":a[3]||(a[3]=a=>e.form.major=a),placeholder:"请输入专业"},null,8,["modelValue"])])),_:1}),n(o,{prop:"className",label:"班级"},{default:p((()=>[n(s,{modelValue:e.form.className,"onUpdate:modelValue":a[4]||(a[4]=a=>e.form.className=a),placeholder:"请输入班级"},null,8,["modelValue"])])),_:1}),n(o,{prop:"card",label:"证件号码",rules:[{required:!0,message:"非法参数",trigger:"blur",validator:e.checkIdNum}]},{default:p((()=>[n(s,{modelValue:e.form.card,"onUpdate:modelValue":a[5]||(a[5]=a=>e.form.card=a),placeholder:"请输入证件号码"},null,8,["modelValue"])])),_:1},8,["rules"]),n(o,{prop:"gender",label:"性别"},{default:p((()=>[n(w,{modelValue:e.form.gender,"onUpdate:modelValue":a[6]||(a[6]=a=>e.form.gender=a),placeholder:"请输入性别"},{default:p((()=>[(f(!0),i(g,null,b(e.genderList,(e=>(f(),V(m,{key:e.value,value:e.value,label:e.title},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(o,{prop:"birthday",label:"出生日期"},{default:p((()=>[n(x,{modelValue:e.birthday,"onUpdate:modelValue":a[7]||(a[7]=a=>e.birthday=a),type:"date",style:{width:"100%"},placeholder:"选择出生日期"},null,8,["modelValue"])])),_:1}),n(o,{prop:"email",label:"邮箱",rules:[{type:"email",required:!0,message:"非法参数",trigger:"blur"}]},{default:p((()=>[n(s,{modelValue:e.form.email,"onUpdate:modelValue":a[8]||(a[8]=a=>e.form.email=a),placeholder:"请输入邮箱",type:"email"},null,8,["modelValue"])])),_:1}),n(o,{prop:"phone",label:"电话",rules:[{required:!0,message:"非法参数",trigger:"blur",validator:e.checkPhone}]},{default:p((()=>[n(s,{modelValue:e.form.phone,"onUpdate:modelValue":a[9]||(a[9]=a=>e.form.phone=a),placeholder:"请输入电话"},null,8,["modelValue"])])),_:1},8,["rules"]),n(o,{prop:"address",label:"地址"},{default:p((()=>[n(s,{modelValue:e.form.address,"onUpdate:modelValue":a[10]||(a[10]=a=>e.form.address=a),placeholder:"请输入地址"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),u("div",L,[u("img",{src:e.imgStr,style:{width:"100px",height:"100px"}},null,8,N)])]),n(z,{size:"large",type:"primary",onClick:e.submit},{default:p((()=>a[11]||(a[11]=[y("提交")]))),_:1},8,["onClick"]),n(z,{size:"large",onClick:e.backPage},{default:p((()=>a[12]||(a[12]=[y("取消")]))),_:1},8,["onClick"])])])}],["__scopeId","data-v-173548b3"]]);export{z as default};
