import{d as a,K as e,L as t,c as l,f as s,e as n,k as u,w as d,x as o,a6 as r,Y as m,ap as i,ar as p,o as c,H as v,I as b,N as f,R as k,a5 as h,n as j,p as _,a7 as w,$ as y}from"./index-ed299ca2.js";/* empty css                     *//* empty css                 *//* empty css            *//* empty css                  *//* empty css               */import{a as N,o as x,m as C}from"./taskSubmitServ-a685ddae.js";import{b as g}from"./studentServ-99476230.js";import"./request-1673f500.js";const I={class:"p-2"},R={class:"query_right",style:{display:"flex","align-items":"center","justify-content":"flex-end"}},L=a({__name:"CorrectingTable",setup(a){const L=e([]),U=e([]);e("");const $=()=>{N(B.value).then((a=>{U.value=a.data.data}))},T=i(),q=(a,e)=>{e<0||e>100?h.alert("分数范围应为0-100"):(a.score=e,C(a).then((a=>{0!=a.data.code?k.error(a.data.msg):k.success("打分成功"),$()})))},B=e({student:{studentId:""}}),S=()=>{N(B.value).then((a=>{U.value=a.data.data}))},V=()=>{T.push("/task-panel")},H=(a,e)=>{const t=new Blob([e]),l=document.createElement("a");l.href=window.URL.createObjectURL(t),l.download=a,document.body.appendChild(l),l.click(),document.removeChild(l),window.URL.revokeObjectURL(l)};return t((()=>{$(),g().then((a=>{L.value=a.data.data}))})),(a,e)=>{const t=p("RightArrow"),i=o,N=j,C=_,g=w,$=r,T=y,O=m;return c(),l("div",I,[s("h3",null,[s("span",null,[s("h3",null,[n(t)])]),e[1]||(e[1]=u("批改作业"))]),s("div",null,[n(i,{onClick:V},{default:d((()=>e[2]||(e[2]=[u("返回")]))),_:1})]),s("div",R,[n($,{inline:!0},{default:d((()=>[n(g,{label:"学生"},{default:d((()=>[n(C,{modelValue:B.value.student.studentId,"onUpdate:modelValue":e[0]||(e[0]=a=>B.value.student.studentId=a)},{default:d((()=>[(c(!0),l(v,null,b(L.value,(a=>(c(),f(N,{key:a.studentId,label:a.numName,value:a.studentId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(g,null,{default:d((()=>[n(i,{onClick:S},{default:d((()=>e[3]||(e[3]=[u("查询")]))),_:1})])),_:1})])),_:1})]),n(O,{data:U.value},{default:d((()=>[n(T,{label:"作业名称",prop:"task.taskName"}),n(T,{label:"课程名称",prop:"task.course.name"}),n(T,{label:"学生",prop:"student.numName"}),n(T,{label:"专业名称",prop:"student.major"}),n(T,{label:"分数",prop:"score"}),n(T,{label:"作业路径",prop:"submitPath"}),n(T,{label:"操作"},{default:d((a=>[n(i,{type:"primary",plain:"",onClick:e=>{return t=a.row,void x(t.id).then((a=>{a.data?H(`${t.task.taskName}-${t.student.numName}.pdf`,a.data):k.error("没有该文件")}));var t}},{default:d((()=>e[4]||(e[4]=[u("查看作业")]))),_:2},1032,["onClick"]),n(i,{type:"success",onClick:e=>{return t=a.row,void h.prompt(`为${t.student.numName}的${t.task.taskName}作业打分`,"打分",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"number"}).then((({value:a})=>{q(t,Number(a))}));var t}},{default:d((()=>e[5]||(e[5]=[u("打分")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])}}});export{L as default};
