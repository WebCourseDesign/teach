import{M as e,d as a,K as l,u as t,L as d,c as u,f as o,ak as s,N as r,w as n,l as i,e as m,H as p,x as c,a6 as v,Y as f,af as _,o as h,k as b,I as y,a5 as I,n as V,p as g,a7 as j,$ as k,al as w,a0 as x,X as D,a8 as C}from"./index-be5cb234.js";/* empty css                *//* empty css                    *//* empty css              *//* empty css                     *//* empty css                 *//* empty css                *//* empty css            *//* empty css                  *//* empty css               */import{r as M}from"./request-9dd860e1.js";import{f as T}from"./teachingServ-654619e3.js";const Y=async a=>(await e("/api/honor/list",{studentId:a})).data,N={class:"base_form"},U={class:"base_query_oneLine"},E={class:"query_left"},L={key:0,class:"query_right"},$={class:"table_center",style:{"margin-top":"5px"}},q={style:{display:"flex","justify-content":"center","margin-top":"10px"}},R=a({__name:"HonorTable",setup(e){const a=l(!1),R=l([]),A=l(""),B=l([]),H=l({honorId:0,name:"",description:"",student:{studentId:"",person:{personId:0,num:"",name:"",type:"",dept:"",card:"",gender:"",birthday:"",email:"",phone:"",address:"",introduce:""},major:"",className:""},getTime:"",reward:""}),O=()=>{H.value={honorId:0,name:"",description:"",student:{studentId:"",person:{personId:0,num:"",name:"",type:"",dept:"",card:"",gender:"",birthday:"",email:"",phone:"",address:"",introduce:""},major:"",className:""},getTime:"",reward:""}},F=()=>{Y().then((e=>{B.value=e}))},G=()=>{const e=new Date;var l;new Date(H.value.getTime)>e?I.alert("获奖时间不能大于当天日期"):""!=H.value.name&&""!=H.value.description&&""!=H.value.student.studentId&&""!=H.value.getTime&&""!=H.value.reward?((l=H.value,M({url:"/api/honor",method:"post",data:l})).then((e=>{a.value=!1,F()})),O()):I.alert("请填写完整信息")},J=e=>{(e=>M({url:`/api/honor/${e}`,method:"delete"}))(e).then((e=>{F()}))},K=t();return d((()=>{(async()=>{T().then((e=>{R.value=e}))})(),F()})),(e,l)=>{const t=c,d=V,I=g,M=j,T=v,S=k,X=w,z=x,P=f,Q=D,W=C,Z=_;return h(),u(p,null,[o("div",N,[l[16]||(l[16]=o("div",{class:"base_header"},[o("div",{class:"blue_column"}),o("div",{class:"base_title"},"荣誉管理")],-1)),o("div",U,[o("div",E,[s(K).$state.userInfo.roles.includes("ROLE_ADMIN")?(h(),r(t,{key:0,class:"commButton",type:"primary",onClick:l[0]||(l[0]=e=>(a.value=!0,void O()))},{default:n((()=>l[11]||(l[11]=[b("添加")]))),_:1})):i("",!0)]),s(K).$state.userInfo.roles.includes("ROLE_ADMIN")||s(K).$state.userInfo.roles.includes("ROLE_TEACHER")?(h(),u("div",L,[m(T,{inline:!0},{default:n((()=>[m(M,{label:"学生"},{default:n((()=>[m(I,{modelValue:A.value,"onUpdate:modelValue":l[1]||(l[1]=e=>A.value=e)},{default:n((()=>[(h(!0),u(p,null,y(R.value,(e=>(h(),r(d,{label:e.title,key:e.id,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),m(M,null,{default:n((()=>[m(t,{type:"default",class:"commButton",onClick:l[2]||(l[2]=e=>{Y(A.value).then((e=>{B.value=e}))})},{default:n((()=>l[12]||(l[12]=[b("查询")]))),_:1}),m(t,{type:"default",class:"commButton",onClick:l[3]||(l[3]=e=>(A.value="",void F()))},{default:n((()=>l[13]||(l[13]=[b("重置")]))),_:1})])),_:1})])),_:1})])):i("",!0)]),o("div",$,[m(P,{data:B.value},{default:n((()=>[m(S,{label:"id",prop:"honorId"}),m(S,{label:"名称",prop:"name"}),m(S,{label:"描述",prop:"description"}),m(S,{label:"获奖学生",prop:"student.numName"}),m(S,{label:"获取时间",prop:"getTime"}),m(S,{label:"奖励",prop:"reward"}),s(K).$state.userInfo.roles.includes("ROLE_ADMIN")?(h(),r(S,{key:0,label:"操作"},{default:n((e=>[m(z,null,{default:n((()=>[m(t,{onClick:l=>{return t=e.row,H.value=t,void(a.value=!0);var t},type:"success"},{default:n((()=>l[14]||(l[14]=[b("编辑")]))),_:2},1032,["onClick"]),m(X,{title:"确定要删除吗?",onConfirm:a=>J(e.row.honorId)},{reference:n((()=>[m(t,{type:"danger"},{default:n((()=>l[15]||(l[15]=[b("删除")]))),_:1})])),_:2},1032,["onConfirm"])])),_:2},1024)])),_:1})):i("",!0)])),_:1},8,["data"])])]),m(Z,{id:"favDialog",modelValue:a.value,"onUpdate:modelValue":l[10]||(l[10]=e=>a.value=e),width:"400px"},{header:n((()=>l[17]||(l[17]=[o("h1",null,"荣誉添加修改对话框",-1)]))),default:n((()=>[m(T,{"label-width":"80px",model:H.value,ref:"form"},{default:n((()=>[m(M,{label:"名称"},{default:n((()=>[m(Q,{modelValue:H.value.name,"onUpdate:modelValue":l[4]||(l[4]=e=>H.value.name=e),placeholder:"请输入名称"},null,8,["modelValue"])])),_:1}),m(M,{label:"描述"},{default:n((()=>[m(Q,{modelValue:H.value.description,"onUpdate:modelValue":l[5]||(l[5]=e=>H.value.description=e),placeholder:"请输入描述",type:"textarea"},null,8,["modelValue"])])),_:1}),m(M,{label:"获奖学生"},{default:n((()=>[m(I,{modelValue:H.value.student.studentId,"onUpdate:modelValue":l[6]||(l[6]=e=>H.value.student.studentId=e),placeholder:"请选择..."},{default:n((()=>[(h(!0),u(p,null,y(R.value,(e=>(h(),r(d,{label:e.title,value:e.id},null,8,["label","value"])))),256))])),_:1},8,["modelValue"])])),_:1}),m(M,{label:"获奖时间"},{default:n((()=>[m(W,{modelValue:H.value.getTime,"onUpdate:modelValue":l[7]||(l[7]=e=>H.value.getTime=e),type:"date",placeholder:"选择日期",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),m(M,{label:"奖励"},{default:n((()=>[m(Q,{modelValue:H.value.reward,"onUpdate:modelValue":l[8]||(l[8]=e=>H.value.reward=e),placeholder:"请输入奖励",type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),o("div",q,[m(t,{type:"primary",onClick:G},{default:n((()=>l[18]||(l[18]=[b("确认")]))),_:1}),m(t,{onClick:l[9]||(l[9]=e=>a.value=!1)},{default:n((()=>l[19]||(l[19]=[b("取消")]))),_:1})])])),_:1},8,["modelValue"])],64)}}});export{R as default};
