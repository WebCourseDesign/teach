import{d as e,M as t,b as a,_ as l,c as s,e as d,f as o,w as n,z as i,G as u,o as r,j as c,x as m,F as p,y as h,O as b,I as f,D as w,E as g,m as y,J as _}from"./index-e2669943.js";/* empty css                     *//* empty css                 *//* empty css                     *//* empty css            *//* empty css               *//* empty css              *//* empty css               */import{c as V,f as k,d as v}from"./personServ-aa644d92.js";import{m as I,a as x}from"./messageBox-8b82c92f.js";const j=e({data:()=>({genderList:[{value:"1",title:"男"},{value:"2",title:"女"}],studentId:null,dataList:[]}),async created(){const e=this.$route.query.studentId;null!=e&&(this.studentId=parseInt(e.toString())),null!=this.studentId&&(this.dataList=await V(this.studentId))},methods:{addRow(){this.dataList.push({studentId:this.studentId})},async saveItem(e){const a=this.dataList[e];if(null==a.relation||""==a.relation||null==a.name||""==a.name||null==a.age||""==a.age||null==a.unit||""==a.unit)return void t.alert("信息不能为空");if(!/^(?:1[0-4][0-9]|[1-9]?[0-9])$/.test(a.age))return void t.alert("年龄格式不正确");const l=await k(a);0==l.code?I(this,"保存成功"):I(this,l.msg)},async deleteItem(e){if(!(await x("确认删除当前成员吗?")))return;const t=await v(this.dataList[e].memberId);0==t.code?(I(this,"删除成功"),this.dataList.splice(e,1)):I(this,t.msg)},backPage(){a.push({path:"/student-panel"})}}}),L={class:"base_form"},U={class:"base_query_oneLine"},C={class:"query_left"},$={class:"table-content"};const q=l(j,[["render",function(e,t,a,l,V,k){const v=i,I=f,x=w,j=g,q=y,B=_,E=u;return r(),s("div",L,[t[5]||(t[5]=d("div",{class:"base_header"},[d("div",{class:"blue_column"}),d("div",{class:"base_title"},"学生家庭成员信息")],-1)),d("div",U,[d("div",C,[o(v,{class:"commButton",onClick:t[0]||(t[0]=t=>e.addRow()),type:"primary"},{default:n((()=>t[1]||(t[1]=[c("添加一行")]))),_:1}),o(v,{class:"commButton",onClick:e.backPage,type:"info"},{default:n((()=>t[2]||(t[2]=[c("返回")]))),_:1},8,["onClick"])])]),d("div",$,[o(E,{data:e.dataList,"header-cell-style":{color:"#2E2E2E",fontSize:"10px",fontWeight:"400",background:"rgb(242,242,242)"},"row-style":{height:"10px"},"cell-style":{padding:"2px"},style:{width:"100%"}},{default:n((()=>[o(I,{label:"序号",fixed:"left",width:"50",color:"black"},{default:n((e=>[c(m(e.$index+1),1)])),_:1}),o(I,{label:"关系",width:"150",color:"black",align:"center"},{default:n((e=>[o(x,{modelValue:e.row.relation,"onUpdate:modelValue":t=>e.row.relation=t,style:{width:"90%"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),o(I,{label:"姓名",width:"150",color:"black",align:"center"},{default:n((e=>[o(x,{modelValue:e.row.name,"onUpdate:modelValue":t=>e.row.name=t,style:{width:"90%"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),o(I,{label:"性别",width:"150",color:"black",align:"center"},{default:n((t=>[o(q,{modelValue:t.row.gender,"onUpdate:modelValue":e=>t.row.gender=e,placeholder:"请选择性别",style:{width:"90%"}},{default:n((()=>[(r(!0),s(p,null,h(e.genderList,(e=>(r(),b(j,{key:e.value,label:e.title,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),o(I,{label:"年龄",width:"100",color:"black",align:"center"},{default:n((e=>[o(x,{modelValue:e.row.age,"onUpdate:modelValue":t=>e.row.age=t,style:{width:"90%"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),o(I,{label:"单位",width:"150",color:"black",align:"center"},{default:n((e=>[o(x,{modelValue:e.row.unit,"onUpdate:modelValue":t=>e.row.unit=t,style:{width:"90%"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),o(I,{label:"操作",width:"200",align:"center",color:"black"},{default:n((a=>[o(B,null,{default:n((()=>[o(v,{onClick:t=>e.saveItem(a.$index),type:"success"},{default:n((()=>t[3]||(t[3]=[c("保存")]))),_:2},1032,["onClick"]),o(v,{onClick:t=>e.deleteItem(a.$index),type:"danger"},{default:n((()=>t[4]||(t[4]=[c("删除")]))),_:2},1032,["onClick"])])),_:2},1024)])),_:1})])),_:1},8,["data"])])])}]]);export{q as default};
