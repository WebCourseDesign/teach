import{d as e,X as a,Y as t,c as l,e as s,f as n,j as u,w as o,z as d,N as r,G as m,a5 as i,a6 as p,o as c,F as v,y as b,O as f,U as k,M as h,E as j,m as _,P as y,I as w}from"./index-7ed7b84e.js";/* empty css                     *//* empty css                 *//* empty css            *//* empty css                  *//* empty css               *//* empty css               */import{a as C,o as N,m as x}from"./taskSubmitServ-ac9ac369.js";import{b as g}from"./studentServ-314d1e09.js";import"./request-e26a986b.js";const I={class:"p-2"},U={class:"query_right",style:{display:"flex","align-items":"center","justify-content":"flex-end"}},L=e({__name:"CorrectingTable",setup(e){const L=a([]),R=a([]);a("");const T=()=>{C(E.value).then((e=>{R.value=e.data.data}))},$=i(),B=(e,a)=>{a<0||a>100?h.alert("分数范围应为0-100"):(e.score=a,x(e).then((e=>{0!=e.data.code?k.error(e.data.msg):k.success("打分成功"),T()})))},E=a({student:{studentId:""}}),O=()=>{C(E.value).then((e=>{R.value=e.data.data}))},S=()=>{$.push("/task-panel")},V=(e,a)=>{const t=new Blob([a]),l=document.createElement("a");l.href=window.URL.createObjectURL(t),l.download=e,document.body.appendChild(l),l.click(),document.removeChild(l),window.URL.revokeObjectURL(l)};return t((()=>{T(),g().then((e=>{L.value=e.data.data}))})),(e,a)=>{const t=p("RightArrow"),i=d,C=j,x=_,g=y,T=r,$=w,q=m;return c(),l("div",I,[s("h3",null,[s("span",null,[s("h3",null,[n(t)])]),a[1]||(a[1]=u("批改作业"))]),s("div",null,[n(i,{onClick:S},{default:o((()=>a[2]||(a[2]=[u("返回")]))),_:1})]),s("div",U,[n(T,{inline:!0},{default:o((()=>[n(g,{label:"学生"},{default:o((()=>[n(x,{modelValue:E.value.student.studentId,"onUpdate:modelValue":a[0]||(a[0]=e=>E.value.student.studentId=e)},{default:o((()=>[(c(!0),l(v,null,b(L.value,(e=>(c(),f(C,{key:e.studentId,label:e.numName,value:e.studentId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(g,null,{default:o((()=>[n(i,{onClick:O},{default:o((()=>a[3]||(a[3]=[u("查询")]))),_:1})])),_:1})])),_:1})]),n(q,{data:R.value},{default:o((()=>[n($,{label:"作业名称",prop:"task.taskName"}),n($,{label:"课程名称",prop:"task.course.name"}),n($,{label:"学生",prop:"student.numName"}),n($,{label:"专业名称",prop:"student.major"}),n($,{label:"分数",prop:"score"}),n($,{label:"作业路径",prop:"submitPath"}),n($,{label:"操作"},{default:o((e=>[n(i,{type:"primary",plain:"",onClick:a=>{return t=e.row,void N(t.id).then((e=>{e.data?V(`${t.task.taskName}-${t.student.numName}.pdf`,e.data):k.error("没有该文件")}));var t}},{default:o((()=>a[4]||(a[4]=[u("查看作业")]))),_:2},1032,["onClick"]),n(i,{type:"success",onClick:a=>{return t=e.row,void h.prompt(`为${t.student.numName}的${t.task.taskName}作业打分`,"打分",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"number"}).then((({value:e})=>{B(t,Number(e))}));var t}},{default:o((()=>a[5]||(a[5]=[u("打分")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])}}});export{L as default};
