import{d as e,a9 as a,a5 as l,aa as t,ab as s,b as d,_ as o,c as n,f as i,e as u,w as r,x as c,Y as m,o as h,k as p,G as b,H as w,I as f,N as g,$ as _,X as y,n as k,p as V,a0 as v}from"./index-ed299ca2.js";/* empty css                     *//* empty css                 *//* empty css            *//* empty css               *//* empty css              */import{m as I,a as x}from"./messageBox-38e2071c.js";const L=e({data:()=>({genderList:[{value:"1",title:"男"},{value:"2",title:"女"}],studentId:null,dataList:[]}),async created(){const e=this.$route.query.studentId;null!=e&&(this.studentId=parseInt(e.toString())),null!=this.studentId&&(this.dataList=await a(this.studentId))},methods:{addRow(){this.dataList.push({studentId:this.studentId})},async saveItem(e){const a=this.dataList[e];if(null==a.relation||""==a.relation||null==a.name||""==a.name||null==a.age||""==a.age||null==a.unit||""==a.unit)return void l.alert("信息不能为空");if(!/^(?:1[0-4][0-9]|[1-9]?[0-9])$/.test(a.age))return void l.alert("年龄格式不正确");const s=await t(a);0==s.code?I(this,"保存成功"):I(this,s.msg)},async deleteItem(e){if(!(await x("确认删除当前成员吗?")))return;const a=await s(this.dataList[e].memberId);0==a.code?(I(this,"删除成功"),this.dataList.splice(e,1)):I(this,a.msg)},backPage(){d.push({path:"/student-panel"})}}}),U={class:"base_form"},j={class:"base_query_oneLine"},C={class:"query_left"},$={class:"table-content"};const q=o(L,[["render",function(e,a,l,t,s,d){const o=c,I=_,x=y,L=k,q=V,B=v,E=m;return h(),n("div",U,[a[5]||(a[5]=i("div",{class:"base_header"},[i("div",{class:"blue_column"}),i("div",{class:"base_title"},"学生家庭成员信息")],-1)),i("div",j,[i("div",C,[u(o,{class:"commButton",onClick:a[0]||(a[0]=a=>e.addRow()),type:"primary"},{default:r((()=>a[1]||(a[1]=[p("添加一行")]))),_:1}),u(o,{class:"commButton",onClick:e.backPage,type:"info"},{default:r((()=>a[2]||(a[2]=[p("返回")]))),_:1},8,["onClick"])])]),i("div",$,[u(E,{data:e.dataList,"header-cell-style":{color:"#2E2E2E",fontSize:"10px",fontWeight:"400",background:"rgb(242,242,242)"},"row-style":{height:"10px"},"cell-style":{padding:"2px"},style:{width:"100%"}},{default:r((()=>[u(I,{label:"序号",fixed:"left",width:"50",color:"black"},{default:r((e=>[p(b(e.$index+1),1)])),_:1}),u(I,{label:"关系",width:"150",color:"black",align:"center"},{default:r((e=>[u(x,{modelValue:e.row.relation,"onUpdate:modelValue":a=>e.row.relation=a,style:{width:"90%"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),u(I,{label:"姓名",width:"150",color:"black",align:"center"},{default:r((e=>[u(x,{modelValue:e.row.name,"onUpdate:modelValue":a=>e.row.name=a,style:{width:"90%"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),u(I,{label:"性别",width:"150",color:"black",align:"center"},{default:r((a=>[u(q,{modelValue:a.row.gender,"onUpdate:modelValue":e=>a.row.gender=e,placeholder:"请选择性别",style:{width:"90%"}},{default:r((()=>[(h(!0),n(w,null,f(e.genderList,(e=>(h(),g(L,{key:e.value,label:e.title,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),u(I,{label:"年龄",width:"100",color:"black",align:"center"},{default:r((e=>[u(x,{modelValue:e.row.age,"onUpdate:modelValue":a=>e.row.age=a,style:{width:"90%"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),u(I,{label:"单位",width:"150",color:"black",align:"center"},{default:r((e=>[u(x,{modelValue:e.row.unit,"onUpdate:modelValue":a=>e.row.unit=a,style:{width:"90%"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),u(I,{label:"操作",width:"200",align:"center",color:"black"},{default:r((l=>[u(B,null,{default:r((()=>[u(o,{onClick:a=>e.saveItem(l.$index),type:"success"},{default:r((()=>a[3]||(a[3]=[p("保存")]))),_:2},1032,["onClick"]),u(o,{onClick:a=>e.deleteItem(l.$index),type:"danger"},{default:r((()=>a[4]||(a[4]=[p("删除")]))),_:2},1032,["onClick"])])),_:2},1024)])),_:1})])),_:1},8,["data"])])])}]]);export{q as default};
